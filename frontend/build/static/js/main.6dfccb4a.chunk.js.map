{"version":3,"sources":["Canvas.js","ServerComponent.js","Passage.js","utils.js","Share.js","Lookup.js","Guesses.js","ModalComponent.js","Info.js","Word.js","HowTo.js","Settings.js","Statistics.js","App.js","reportWebVitals.js","i18n.js","index.js"],"names":["Canvas","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","canvas","React","createRef","image","context","current","getContext","draw","src","toDataURL","_this$props","rest","objectWithoutProperties","react_default","a","createElement","className","assign","ref","alt","title","style","width","height","Component","ServerComponent","server","crossDomain","fetch","bind","assertThisInitialized","url","success","fail","headers","Content-Type","then","res","json","result","error","console","log","sanitizeHtml","require","Passage","state","guesses","_this2","document","addEventListener","event","setState","detail","count","_this3","lines","map","line","i","key","dangerouslySetInnerHTML","__html","allowedTags","allowedAttributes","withTranslation","cssVar","name","getComputedStyle","body","getPropertyValue","isTouchOnly","window","matchMedia","matches","removeDiacritics","text","normalize","replace","setData","value","localStorage","setItem","JSON","stringify","getData","def","getItem","parse","_unused","Share","shareName","baseShareName","options","scoreImage","toggleOptions","shareScore","getScore","makeScore","makeScoreImage","makeScoreDescription","alertShare","setTextStyle","setSpoilerStyle","setImageStyle","setStyle","t","prev","newName","setTimeout","puzzle","order","score","concat","opener","src_Canvas","ctx","_boxColors","y","fillStyle","fillRect","font","fillText","off","maxWidth","words","split","currentLine","length","word","measureText","push","getLines","ox","forEach","boxColors","defineProperty","strokeStyle","x","guess","hint","author","book","translate","size","s","lineWidth","h","beginPath","moveTo","lineTo","stroke","drawCheck","year","scale","closePath","fill","drawArrow","setTransform","URL","description","num","_$0$1$guess$hint$yea","join","_pubyear","pubyear","wrong","scoreCard","splice","data","navigator","share","r","clipboard","writeText","alert","prevProps","prevState","snapshot","opacity","Math","max","children","scrollHeight","shareClass","instructions","role","aria-label","tabIndex","autoFocus","onClick","aria-hidden","aria-live","Trans","i18nKey","Lookup","books","selected","handleKeypress","handleChange","handleSelect","selectBook","handleBlur","loadBooks","filteredBooks","bcount","code","guessId","target","onSelect","id","textContent","rd","patterns","RegExp","filter","reduce","p","pat","match","filtered","self","list","classes","htmlFor","type","placeholder","aria-controls","aria-autocomplete","aria-expanded","aria-activedescendant","onBlur","onChange","onKeyDown","HINTS","_HINTS","Guesses","done","Array","isArray","dispatchGuess","guessing","handleKey","makeGuess","classList","contains","preventDefault","customEvent","CustomEvent","dispatchEvent","params","URLSearchParams","toString","sid","mapGuess","scores","n","lookup","button","src_Share","src_Lookup","disabled","ModalComponent","on","close","contents","onClose","inClass","element","parentElement","getTitle","Info","href","rel","Word","i18n","romanization","vert","vertical","ipa","meaning","resolvedLanguage","en","HowTo","siteLanguages","endonym","es","fr","Settings","changeShareStyle","scoring","g","language","languageChoices","keys","lang","checked","e","changeLanguage","Statistics","games","wins","maxScore","cStreak","mStreak","values","won","parseInt","c","distribution","App","modal","openInfo","openHelp","openSettings","openStats","closeModal","src_Passage","src_Guesses","src_Info","src_HowTo","src_Settings","src_Statistics","Date","getTimezoneOffset","reportWebVitals","onPerfEntry","Function","__webpack_require__","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","use","Backend","LanguageDetector","initReactI18next","init","debug","fallbackLng","interpolation","escapeValue","ReactDOM","createRoot","getElementById","render","StrictMode","src_App_0"],"mappings":"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","file":"static/js/main.6dfccb4a.chunk.js","sourcesContent":["import React from \"react\";\n\nclass Canvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        this.image = React.createRef();\n    }\n\n    componentDidMount() {\n        const context = this.canvas.current.getContext('2d');\n        this.props.draw(context);\n        this.image.current.src = this.canvas.current.toDataURL();\n    }\n\n    render() {\n        const {draw, ...rest} = this.props;\n        return <div className=\"CanvasContainer\">\n            <canvas ref={this.canvas} className=\"Hide\" {...rest}/>\n            <img ref={this.image} alt={this.props.title} style={{\n                width: this.props.width, height: this.props.height\n            }}/>\n        </div>;\n    }\n}\n\nexport default Canvas;\n","import React from \"react\";\nimport Canvas from \"./Canvas\";\n\nclass ServerComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n            // development build code\n            this.server = props.server || \"http://\" + window.location.host.split(':')[0] + \":8000\";\n            this.crossDomain = true;\n        } else {\n            // production build code\n            this.server = props.server || \"\";\n            this.crossDomain = false;\n        }\n        this.fetch = this.fetch.bind(this);\n    }\n\n    fetch(url, success, fail) {\n        let headers = {};\n        if (this.crossDomain) {\n            headers = {\n                crossDomain: true,\n                headers: {'Content-Type': 'application/json'},\n            };\n        }\n        fetch(this.server + url, headers)\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    success(result)\n                },\n                (error) => {\n                    if (fail) {\n                        fail(error);\n                    } else {\n                        console.log(error);\n                    }\n                }\n            );\n    }\n}\n\nexport default ServerComponent;\n","import React from \"react\";\nimport {withTranslation} from \"react-i18next\";\nconst sanitizeHtml = require('sanitize-html');\n\nclass Passage extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            guesses: 0\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('guess', event => this.setState({'guesses': event.detail.count}));\n    }\n\n    render() {\n        const lines = this.props.lines.map((line, i)=>\n            <span className={\"line\" + (i <= this.state.guesses ? \" shown\" : \"\")} key={i} dangerouslySetInnerHTML={{\n                __html: sanitizeHtml(line, {\n                    allowedTags: ['em'],\n                    allowedAttributes: []\n                })\n            }}>\n            </span>\n        );\n        return (\n            <div className=\"PhraseContainer\">\n                {lines}\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Passage);","function plural(n, singular, plural) {\n    return n == 1 ? singular : plural;\n}\n\nfunction compare(a, b) {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nfunction randomInt(r, f) {\n    f = f || 0;\n    return Math.floor(Math.random() * r) + f\n}\n\nfunction randomChoice(arr) {\n    return arr[randomInt(arr.length)];\n}\n\nfunction cssVar(name) {\n    return getComputedStyle(document.body).getPropertyValue(name);\n}\n\nfunction isTouchOnly() {\n    return window.matchMedia(\"(any-hover: none)\").matches;\n}\n\nfunction isLightMode() {\n    return window.matchMedia(\"(prefers-color-scheme: light)\").matches;\n}\n\nfunction escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nfunction removeDiacritics(text) {\n    return text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n}\n\nfunction setData(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction getData(key, def) {\n    let value = localStorage.getItem(key);\n    try {\n        value = JSON.parse(value);\n    } catch {\n    }\n    if (value === null) {\n        value = def;\n    }\n    return value;\n}\n\nfunction inClass(element, className) {\n    if (element.classList.contains(className)) {\n        return true;\n    }\n    if (element.parentElement) {\n        return inClass(element.parentElement, className);\n    }\n    return false;\n}\n\nfunction getLines(ctx, text, off) {\n    const maxWidth = ctx.canvas.width - off;\n    const words = text.split(\" \");\n    let lines = [];\n    let currentLine = words[0];\n\n    for (let i = 1; i < words.length; i++) {\n        const word = words[i];\n        const width = ctx.measureText(currentLine + \" \" + word).width;\n        if (width < maxWidth) {\n            currentLine += \" \" + word;\n        } else {\n            lines.push(currentLine);\n            currentLine = word;\n        }\n    }\n    lines.push(currentLine);\n    return lines;\n}\n\nfunction drawArrow(ctx, s) {\n    const h = (s / 2);\n    ctx.beginPath();\n    ctx.moveTo(0, -h);\n    ctx.lineTo(-h, 0);\n    ctx.lineTo(-h/2, 0);\n    ctx.lineTo(-h/2, h);\n    ctx.lineTo(h/2, h);\n    ctx.lineTo(h/2, 0);\n    ctx.lineTo(h, 0);\n    ctx.closePath();\n    ctx.fill();\n}\n\nfunction drawCheck(ctx, s) {\n    ctx.lineWidth = 4;\n    const h = (s / 2);\n    ctx.beginPath();\n    ctx.moveTo(-h, 0);\n    ctx.lineTo(-2, h-2);\n    ctx.lineTo(h, -h);\n    ctx.stroke();\n}\n\nexport {\n    getLines,\n    drawArrow,\n    drawCheck,\n    plural,\n    compare,\n    randomInt,\n    randomChoice,\n    cssVar,\n    isTouchOnly,\n    isLightMode,\n    escapeRegExp,\n    removeDiacritics,\n    setData,\n    getData,\n    inClass\n}","import React from \"react\";\nimport {cssVar, getData, isLightMode, isTouchOnly, setData, getLines, drawArrow, drawCheck} from \"./utils\";\nimport Canvas from \"./Canvas\";\nimport {withTranslation, Trans} from \"react-i18next\";\n\nclass Share extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            style: getData(\"shareStyle\", \"text\"),\n            shareName: this.baseShareName(),\n            options: false,\n        };\n        this.options = React.createRef();\n        this.scoreImage = React.createRef();\n        this.toggleOptions = this.toggleOptions.bind(this);\n        this.shareScore = this.shareScore.bind(this);\n        this.getScore = this.getScore.bind(this);\n        this.makeScore = this.makeScore.bind(this);\n        this.makeScoreImage = this.makeScoreImage.bind(this);\n        this.makeScoreDescription = this.makeScoreDescription.bind(this);\n        this.alertShare = this.alertShare.bind(this);\n        this.setTextStyle = this.setTextStyle.bind(this);\n        this.setSpoilerStyle = this.setSpoilerStyle.bind(this);\n        this.setImageStyle = this.setImageStyle.bind(this);\n        this.setStyle = this.setStyle.bind(this);\n    }\n\n    baseShareName() {\n        const t = this.props.t;\n        const style = getData(\"shareStyle\", \"text\");\n        return style === \"image\" ? t(\"buttons.copyAlt\") : t(\"buttons.share\");\n    }\n\n    toggleOptions() {\n        this.setState(prev => ({options: !prev.options}));\n    }\n\n    alertShare(newName) {\n        this.setState({shareName: newName});\n        setTimeout(() => this.setState({shareName: this.baseShareName()}), 3000);\n    }\n\n    getScore() {\n        const scores = getData('scores');\n        return scores[this.props.puzzle.order];\n    }\n\n    makeScoreImage() {\n        const score = this.getScore();\n        const title = `Bookle #${this.props.puzzle.order}: ${score}/6`;\n        let opener = this.props.puzzle.lines[0];\n        const guesses = this.props.guesses;\n        const size = 30;\n        const ox = 10;\n        const ix = 10;\n        const oy = 30;\n        const ly = 10;\n        return <Canvas draw={function (ctx) {\n            let y = oy;\n            ctx.fillStyle = cssVar('--bg-color');\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n            ctx.fillStyle = cssVar('--text-color');\n            ctx.font = '25px';\n            ctx.fillText(title, ox, y);\n            y += 30;\n            ctx.font = '25px';\n            getLines(ctx, opener, ox * 2).forEach(function (line, i) {\n                ctx.fillText(line, ox * 2, y);\n                y += 20\n            });\n\n            const boxColors = {\n                [true]: cssVar('--correct-color'),\n                [false]: cssVar('--guess-bg-color'),\n            }\n            ctx.strokeStyle = cssVar('--text-color');\n            let x = ox + ix;\n            guesses.forEach(function (guess, i) {\n                ctx.fillStyle = boxColors[guess.hint.author];\n                ctx.fillRect(x, y, size, size);\n\n                if (guess.hint.book) {\n                    ctx.font = '18px mono';\n                    ctx.fillStyle = boxColors[true];\n                    ctx.fillRect(x, y, size, size);\n                    ctx.translate(x + size / 2, y + size / 2);\n                    drawCheck(ctx, size - 10);\n                } else {\n                    ctx.fillStyle = cssVar('--arrow-color');\n                    ctx.fillRect(x, y, size, size);\n                    ctx.fillStyle = cssVar('--text-color');\n                    ctx.translate(x + size / 2, y + size / 2);\n                    if (guess.hint.year == -1) {\n                        ctx.scale(1, -1);\n                    }\n                    drawArrow(ctx, size - 10);\n                }\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                x += size + 5;\n            });\n            y += size + ly;\n\n            ctx.fillStyle = cssVar('--text-color');\n            ctx.font = '20px';\n            ctx.fillText(document.URL, ox, y + 20);\n        }} width={(size + 1) * 6 + (ox + ix) * 2} height={(size + ly) * (guesses.length) + 70 + oy + ly}\n                       title={this.makeScoreDescription()}/>\n    }\n\n    makeScoreDescription() {\n        const t = this.props.t;\n        let description = [t('share.alt.title', {num: this.props.puzzle.order})];\n        description.push(this.props.puzzle.lines[0]);\n        const score = this.getScore();\n        if (this.props.success) {\n            description.push(t(\"share.alt.score\", {count: score}));\n        } else {\n            description.push(t(\"share.alt.miss\"));\n        }\n        this.props.guesses.forEach(function (guess, i) {\n            let line = t('share.alt.guessTitle', {num: i + 1});\n            if (guess.hint.book) {\n                line += t('share.alt.guessRight');\n            } else {\n                line += t('share.alt.author', {context: guess.hint.author ? 'right' : 'wrong'}) + ', ';\n                line += t('share.alt.year', {context: {[-1]: 'early', [0]: 'right', [1]: 'late'}[guess.hint.year]});\n            }\n            description.push(line);\n        });\n        description.push(t('share.alt.link', {url: document.URL}));\n        return description.join(\"\\n\");\n    }\n\n    makeScore() {\n        const style = this.state.style;\n        const score = this.getScore();\n        const title = `#Bookle #${this.props.puzzle.order}: ${score}/6\\n  ${this.props.puzzle.lines[0]}`;\n        if (style === \"image\") {\n            return this.makeScoreImage();\n        }\n\n        const pubyear = {\n            [-1]: 'â¬‡ï¸ï¸',\n            [0]: 'âœ…',\n            [1]: 'â¬†ï¸',\n        }\n        const right = 'ðŸŸ©';\n        const almost = 'ðŸŸ§';\n        const wrong = isLightMode() ? 'â¬œ' : 'â¬›';\n        let scoreCard = [];\n        if (style === \"spoiler\") {\n            scoreCard = this.props.guesses.map(function (guess) {\n                if (guess.hint.book) {\n                    return right+pubyear[0];\n                } else {\n                    let hint = [];\n                    if (guess.hint.author) {\n                        hint.push(almost);\n                    } else {\n                        hint.push(wrong);\n                    }\n                    hint.push(pubyear[guess.hint.year]+' ');\n                    hint.push(\" ||`\" + guess.book + \"`||\")\n                    return hint.join(\"\");\n                }\n            });\n        } else {\n            let score = \"ðŸ“– \" + this.props.guesses.map(function (guess) {\n                if (guess.hint.book) {\n                    return right+pubyear[0];\n                } else {\n                    return (guess.hint.author ? almost : wrong) + pubyear[guess.hint.year]\n                }\n            }).join(\" \");\n            scoreCard = [score];\n        }\n        scoreCard.splice(0, 0, title);\n        scoreCard.push(document.URL);\n        return scoreCard.join(\"\\n\");\n    }\n\n    shareScore() {\n        let data = this.makeScore();\n        if (this.state.style === \"image\") {\n            data = this.makeScoreDescription();\n        }\n        if (isTouchOnly() && this.state.style !== \"image\" && navigator.share) {\n            navigator.share({\n                title: \"Bookle\",\n                text: data,\n            }).then(r => this.alertShare(\"Shared\"));\n        } else if (navigator.clipboard) {\n            navigator.clipboard.writeText(data).then(r => this.alertShare(\"Copied\"));\n        } else {\n            alert(\"Could not copy to clipboard, copy manually here:\\n\\n\" + data);\n        }\n    }\n\n    setStyle(style) {\n        setData(\"shareStyle\", style)\n        this.setState({\n            style: style,\n            shareName: this.baseShareName(),\n        });\n    }\n\n    setTextStyle() {\n        this.setStyle(\"text\");\n    }\n\n    setSpoilerStyle() {\n        this.setStyle(\"spoiler\");\n    }\n\n    setImageStyle() {\n        this.setStyle(\"image\");\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        let height = 0;\n        let opacity = 0;\n        if (this.state.options) {\n            height = Math.max(\n                this.options.current.children[0].scrollHeight + 10,\n                this.options.current.children[1].scrollHeight,\n            ) + 'px';\n            opacity = 1;\n        }\n        this.options.current.style = \"height: \" + height + \"; opacity: \" + opacity + \";\";\n        if (this.scoreImage.current) {\n            height = 0;\n            opacity = 0;\n            if (!this.state.options) {\n                height = this.scoreImage.current.scrollHeight + 'px';\n                opacity = 1;\n            }\n            this.scoreImage.current.style = \"height: \" + height + \"; opacity: \" + opacity + \";\";\n        }\n    }\n\n    render() {\n        const t = this.props.t;\n        let shareClass = \"Guess Share\";\n        if (!this.props.success) {\n            shareClass += \" Fail\";\n        }\n        let instructions = \"\";\n        let image = \"\";\n        if (this.state.style === \"image\") {\n            instructions = t(\"share.instructions\", {\n                \"context\": isTouchOnly() ? \"tap\" : \"click\"\n            })\n            image = (<div className=\"ScoreImage Foldable\" ref={this.scoreImage}>\n                {this.makeScoreImage()}\n            </div>)\n        }\n        let score = this.makeScore();\n        if (this.state.style !== \"image\") {\n            score = <pre role=\"image\" aria-label={t(\"share.description\")}>{score}</pre>;\n        }\n        return <div className=\"ShareBox\">\n            <button tabIndex=\"0\" autoFocus className={shareClass}\n                    onClick={this.shareScore}>{this.state.shareName}</button>\n            <div className=\"ShareData Foldable\" ref={this.options} aria-hidden={this.state.options ? \"false\" : \"true\"}\n                 style={{height: 0, opacity: 0}} aria-live=\"polite\">\n                <div className=\"ShareOptions\" aria-label={t(\"share.styleChoice\")}>\n                    <button className={\"ShareOption\" + ((this.state.style === \"text\") ? \" Selected\" : \"\")}\n                            onClick={this.setTextStyle}>{t(\"share.textStyle\")}\n                    </button>\n                    <button className={\"ShareOption\" + ((this.state.style === \"spoiler\") ? \" Selected\" : \"\")}\n                            onClick={this.setSpoilerStyle}>{t(\"share.spoilerStyle\")}\n                    </button>\n                    <button className={\"ShareOption\" + ((this.state.style === \"image\") ? \" Selected\" : \"\")}\n                            onClick={this.setImageStyle}>{t(\"share.imageStyle\")}\n                    </button>\n                </div>\n                <div className=\"ShareContent\" aria-live=\"polite\">\n                    {instructions}\n                    {score}\n                </div>\n            </div>\n            {image}\n            <button className=\"ToggleShareOptions\" onClick={this.toggleOptions}>\n                <Trans i18nKey=\"share.options\">Share<br/>Options</Trans>\n            </button>\n        </div>;\n    }\n}\n\nexport default withTranslation()(Share);","import ServerComponent from \"./ServerComponent\";\nimport {compare, escapeRegExp, removeDiacritics} from \"./utils\";\nimport {withTranslation} from \"react-i18next\";\nimport React from \"react\";\n\nclass Lookup extends ServerComponent {\n\n    constructor(props) {\n        super(props);\n        this.books = [];\n        this.state = {value: \"\", selected: 0};\n\n        this.handleKeypress = this.handleKeypress.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSelect = this.handleSelect.bind(this);\n        this.selectBook = this.selectBook.bind(this);\n        this.handleBlur = this.handleBlur.bind(this);\n        this.loadBooks = this.loadBooks.bind(this);\n    }\n\n    handleKeypress(event) {\n        let selected = this.state.selected;\n        let books = this.filteredBooks();\n        let bcount = books.length;\n\n        if (event.code === \"ArrowDown\") {\n            if (selected === null) {\n                selected = bcount - 1;\n            } else {\n                selected -= 1;\n            }\n            if (selected < 0) {\n                selected = null;\n            }\n        } else if (event.code === \"ArrowUp\") {\n            if (selected === null) {\n                selected = 0;\n            } else {\n                selected += 1;\n            }\n            if (selected >= bcount) {\n                selected = null;\n            }\n        }\n        if (event.code === \"Enter\") {\n            if (selected === null) {\n                selected = 0;\n            } else {\n                let book = books[selected];\n                this.selectBook(book);\n            }\n        }\n        this.setState({selected: selected});\n    }\n\n    handleChange(event) {\n        this.guessId = null;\n        this.setState({value: event.target.value, selected: null});\n        this.props.onSelect();\n    }\n\n    handleSelect(event) {\n        this.selectBook({id: event.target.value, title: event.target.textContent});\n    }\n\n    handleBlur(event) {\n    }\n\n    selectBook(book) {\n        if (book) {\n            this.guessId = book.id;\n            this.setState({value: book.title});\n            this.props.onSelect(book);\n        }\n    }\n\n    filteredBooks() {\n        const rd = removeDiacritics;\n        const query = rd(this.state.value);\n        const patterns = query.split(\" \").map(t => new RegExp('\\\\b' + escapeRegExp(t), 'gi'));\n        return this.books.filter(book => patterns.reduce(\n            (p, pat) => p && (rd(book.title).match(pat) || rd(book.author).match(pat)),\n            true\n        ));\n    }\n\n    render() {\n        let filtered = \"\";\n        let selected = null;\n        if (!this.guessId && this.state.value) {\n            const self = this;\n            let list = this.filteredBooks().map(function (book, i) {\n                let classes = \"Book\";\n                if (i === self.state.selected) {\n                    classes += \" Selected\";\n                    selected = book;\n                }\n                return (\n                    <li className={classes} key={book.id} value={book.id} role=\"option\"\n                        onClick={self.handleSelect} id={\"book-\" + book.id}>\n                        {book.title} ({book.author})\n                    </li>);\n            });\n            filtered = (\n                <ul className=\"BookList\" id=\"books\" aria-label=\"books\" role=\"listbox\">\n                    {list}\n                </ul>\n            )\n        }\n        const t = this.props.t;\n        return (\n            <div className=\"LookupWrapper\">\n                <label className=\"Hidden\" htmlFor=\"guess-lookup\">{t(\"lookup.description\")}</label>\n                <input id=\"guess-lookup\" type=\"text\" className=\"Guess Lookup\" autoFocus role=\"combobox\"\n                       placeholder={t(\"lookup.prompt\")} value={this.state.value}\n                       aria-controls=\"Books\"\n                       aria-autocomplete=\"list\"\n                       aria-expanded={filtered ? \"true\" : \"false\"}\n                       aria-activedescendant={selected ? \"Book-\" + selected.id : \"none\"}\n                       onBlur={this.handleBlur}\n                       onChange={this.handleChange} onKeyDown={this.handleKeypress}/>\n                {filtered}\n            </div>\n        )\n    }\n\n    componentWillUnmount() {\n        this.books = [];\n    }\n\n    loadBooks() {\n        this.fetch(\"/books.json\",\n            (result) => {\n                this.books = result;\n            }\n        );\n    }\n\n    componentDidMount() {\n        this.loadBooks();\n    }\n}\n\nexport default withTranslation()(Lookup);\n","import ServerComponent from \"./ServerComponent\";\nimport {getData, setData} from \"./utils\";\nimport Share from \"./Share\";\nimport React from \"react\";\nimport Lookup from \"./Lookup\";\nimport {withTranslation} from \"react-i18next\";\n\nconst HINTS = {\n    [-1]: 'fa-arrow-down',\n    [1]: 'fa-arrow-up',\n    [0]: 'fa-check',\n    [true]: 'fa-check',\n    [false]: 'fa-xmark',\n}\n\nclass Guesses extends ServerComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        let done = false;\n        let success = false;\n        let guesses = [];\n        if (this.props.puzzle) {\n            let data = getData('guess' + this.props.puzzle.order);\n            if (Array.isArray(data)) {\n                guesses = data;\n                success = guesses[guesses.length - 1].success;\n                done = success || guesses.length >= 6;\n                if (done) {\n                    this.dispatchGuess(6);\n                } else {\n                    this.dispatchGuess(guesses.length);\n                }\n            }\n        }\n        this.state = {\n            guess: null,\n            guesses: guesses,\n            guessing: false,\n            done: done,\n            success: success,\n        };\n        this.onSelect = this.onSelect.bind(this);\n        this.handleKey = this.handleKey.bind(this);\n        this.makeGuess = this.makeGuess.bind(this);\n    }\n\n    onSelect(guess) {\n        this.setState({\n            guess: guess,\n            done: guess ? guess.success : false,\n        });\n    }\n\n    handleKey(event) {\n        if (this.state.guess && event.code === \"Enter\" && event.target.classList.contains(\"Lookup\")) {\n            this.makeGuess();\n            event.preventDefault();\n        }\n    }\n\n    dispatchGuess(count) {\n        const customEvent = new CustomEvent('guess', { detail: { count: count } });\n        document.dispatchEvent(customEvent);\n    }\n\n    makeGuess() {\n        if (this.state.guessing) {\n            return;\n        }\n        const params = new URLSearchParams({\n            book: this.state.guess.id,\n            puzzle: this.props.puzzle.id,\n        }).toString();\n        this.setState({'guessing': true});\n        this.fetch(\"/guess.json?\" + params,\n            (result) => {\n                let guesses = this.state.guesses;\n                guesses.push(result);\n                let done = result.success || guesses.length >= 6;\n                this.setState({\n                    guesses: guesses,\n                    guessing: false,\n                    done: done,\n                    success: result.success,\n                    guess: null,\n                    sid: result.sid,\n                    mapGuess: null,\n                });\n                if (done) {\n                    this.dispatchGuess(6);\n                } else {\n                    this.dispatchGuess(guesses.length);\n                }\n\n                if (this.props.puzzle.order) {\n                    setData('guess' + this.props.puzzle.order, this.state.guesses);\n                    if (done) {\n                        let scores = getData('scores') || {};\n                        let score;\n                        if (result.success) {\n                            score = guesses.length;\n                        } else {\n                            score = 'X';\n                        }\n                        scores[this.props.puzzle.order] = score;\n                        setData('scores', scores);\n                    }\n                }\n            },\n            (error) => {\n                this.setState({guessing: false});\n            }\n        );\n    }\n\n    render() {\n        const t = this.props.t;\n\n        const numbers = [0, 1, 2, 3, 4, 5];\n        const guesses = numbers.map(n => this.state.guesses[n] || false);\n        const data = guesses.map(function (guess, n) {\n            if (guess) {\n                return (<li className=\"Guess Hints\" key={n}>\n                    <div className=\"author hint\">\n                        <div className=\"wrapper\">{guess.author}</div>\n                        <i className={`icon fa-solid ${HINTS[guess.hint.author]}`}></i>\n                    </div>\n                    <div className=\"bookTitle hint\">\n                        <div className=\"wrapper\">{guess.book}</div>\n                        <i className={`icon fa-solid ${HINTS[guess.hint.book]}`}></i>\n                    </div>\n                    <div className=\"year hint\" title={t('guess.yearHint', {\n                        context: {[-1]: 'early', [0]: 'right', [1]: 'late'}[guess.hint.year]\n                    })}>\n                        <div className=\"wrapper\">{guess.year}</div>\n                        <i className={`icon fa-solid ${HINTS[guess.hint.year]}`}></i>\n                    </div>\n                </li>);\n            } else {\n                return (<li className=\"Guess Empty\" key={n}/>);\n            }\n        });\n\n        let lookup = \"\";\n        let button = \"\";\n        if (this.state.done) {\n            button = <Share success={this.state.success} guesses={this.state.guesses}\n                            puzzle={this.props.puzzle}/>;\n        } else {\n            lookup = <Lookup onSelect={this.onSelect} key={this.state.guesses.length}/>;\n            button = <button tabIndex=\"0\" className=\"MakeGuess Guess\" onClick={this.makeGuess}\n                             disabled={this.state.guessing || !this.state.guess}>{t('buttons.guess')}</button>;\n        }\n\n        return <div className=\"GuessWrapper\">\n            <ul className=\"Guesses\">\n                {data}\n            </ul>\n            <div className=\"LookupSection\" onKeyDown={this.handleKey}>\n                {lookup}\n                {button}\n            </div>\n        </div>\n    }\n}\n\nclass Solution extends React.Component {\n    render() {\n        return (\n            <div className=\"LookupWrapper\" aria-live=\"polite\">\n                <input type=\"text\" className=\"Guess Lookup\" aria-label=\"correct answer\"\n                       disabled value={this.props.answer}/>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Guesses);","import React from \"react\";\nimport {inClass} from \"./utils\";\n\nclass ModalComponent extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.state = {on: false};\n        this.close = this.close.bind(this);\n        this.onClick = this.onClick.bind(this);\n        this.contents = this.contents.bind(this);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return {on: props.on};\n    }\n\n    getTitle() {\n        return \"Modal\";\n    }\n\n    close(event) {\n        this.props.onClose(event);\n    }\n\n    onClick(event) {\n        if (inClass(event.target, \"Close\") || event.target.classList.contains(\"Overlay\")) {\n            this.close();\n        }\n    }\n\n    render() {\n        const t = this.props.t || ((s) => s); // needs to be injected in subclasses\n        let opacity = this.state.on ? 1 : 0;\n        let height = this.state.on ? \"100vh\" : 0;\n        return (\n            <div className=\"Overlay\" onClick={this.onClick} style={{\n                opacity: opacity, height: height\n            }} aria-hidden={this.state.on ? \"false\" : \"true\"} aria-live=\"polite\">\n                <div className=\"ModalContainer\">\n                    <h1>{this.getTitle()}</h1>\n                    <hr/>\n                    {this.contents()}\n                    <a className=\"Close Icon\">\n                        <span className=\"Description\">{t('buttons.close')}</span>\n                        <i className=\"fa-solid fa-circle-xmark\"></i>\n                    </a>\n                </div>\n            </div>\n        )\n    }\n\n    contents() {\n    }\n}\n\nexport default ModalComponent;","import React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation} from \"react-i18next\";\n\nclass Info extends ModalComponent {\n    getTitle() {\n        return this.props.t(\"titles.info\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        return <div className=\"InfoContent\">\n            <p>{t(\"info.credit\")}</p>\n            <p>\n                <a href=\"https://github.com/sealgair/bookle\" target=\"_new\">\n                    <i className=\"fa-brands fa-github Icon\"></i>\n                    {t(\"info.code\")}\n                </a>\n            </p>\n            <p>\n                <a href=\"https://twitter.com/ChaseCaster\" target=\"_new\">\n                    <i className=\"fa-brands fa-twitter Icon\"></i>\n                    {t(\"info.tweet\")}\n                </a>\n            </p>\n            <p>\n                <a rel=\"me\" href=\"https://weirder.earth/@chase\" target=\"_new\">\n                    <i className=\"fa-brands fa-mastodon Icon\"></i>\n                    {t(\"info.toot\")}\n                </a>\n            </p>\n            <p>\n                {t(\"info.bugs\")}\n            </p>\n            <hr/>\n            <p className=\"links\">\n                <div className=\"title\">{t(\"info.links\")}</div>\n                <a href=\"https://lingule.xyz\" target=\"_blank\">Lingule</a> <div className=\"description\">{t(\"info.lingule\")}</div>\n            </p>\n        </div>;\n    }\n}\n\nexport default withTranslation()(Info);","import React from \"react\";\nimport {withTranslation} from \"react-i18next\";\n\nclass Word extends React.Component {\n    render() {\n        const t = this.props.t;\n        const i18n = this.props.i18n;\n        let romanization = \"\";\n        if (this.props.romanization) {\n            romanization = <div id=\"romanization\" className=\"ToolTip Side\"\n                                title={t(\"tips.romanization\")}>{this.props.romanization}</div>;\n        }\n        let vert = this.props.vertical ? \"vertical\" : \"\";\n        return (\n            <div className=\"WordContainer\">\n                <span id=\"word\" className={`ToolTip Side ${vert}`} title={t(\"tips.word\")}>{this.props.word}</span>\n                {romanization}\n                <span id=\"ipa\" className=\"ToolTip Side\" title={t(\"tips.ipa\")}>{this.props.ipa}</span>\n                <span id=\"meaning\" className=\"ToolTip Side\" title={t(\"tips.meaning\")}>\n                    {this.props.meaning[i18n.resolvedLanguage] || this.props.meaning.en}\n                </span>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Word);","import Word from \"./Word\";\nimport React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation, Trans} from \"react-i18next\";\n\nclass HowTo extends ModalComponent {\n    getTitle() {\n        return this.props.t(\"titles.how-to\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        return (\n            <div>\n                <p>{t(\"howto.intro\")}</p>\n                <p>{t(\"howto.afterGuess\")}</p>\n                <p>\n                    {t(\"howto.example.phrase\")}\n                    <div className=\"PhraseContainer\">\n                        <span className=\"line shown\">It was the best of times, it was the worst of times,</span>\n                    </div>\n\n                    {t(\"howto.example.guess\")}\n                    <div className=\"GuessWrapper\">\n                        <ul className=\"Guesses\">\n                            <li className=\"Guess Hints\">\n                                <div className=\"author hint\">\n                                    Charles Dickens\n                                    <i className=\"icon fa-solid fa-check\"></i>\n                                </div>\n                                <div className=\"bookTitle hint\">\n                                    Oliver Twist\n                                    <i className=\"icon fa-solid fa-xmark\"></i>\n                                </div>\n                                <div className=\"year hint\">\n                                    1873\n                                    <i className=\"icon fa-solid fa-arrow-up\"></i>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                    {t(\"howto.example.explain\")}\n                </p>\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(HowTo);","import {getData, setData} from \"./utils\";\nimport {withTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport ModalComponent from \"./ModalComponent\";\n\nconst siteLanguages = {\n  en: { endonym: 'English' },\n  es: { endonym: 'EspaÃ±ol' },\n  fr: { endonym: 'FranÃ§ais' },\n};\n\nclass Settings extends ModalComponent {\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            share: getData(\"shareStyle\", \"text\"),\n        }\n        this.changeShareStyle = this.changeShareStyle.bind(this);\n    }\n\n    getTitle() {\n        return this.props.t(\"titles.settings\");\n    }\n\n    changeShareStyle(event) {\n        let style = event.target.value;\n        setData('shareStyle', style);\n        this.setState({share: style});\n    }\n\n    contents() {\n        const t = this.props.t;\n        const i18n = this.props.i18n;\n        const guesses = []; // TODO\n        const guessing = guesses && guesses.length < 6 && guesses.filter(g => g.hint.language).length === 0;\n        const scoring = guessing || !guesses;\n\n        const languageChoices = Object.keys(siteLanguages).map(lang=>\n            <li key={lang}><label>\n                <input type=\"radio\" name=\"language\" value={lang}\n                       checked={i18n.resolvedLanguage === lang}\n                       onChange={(e) => {\n                           if (e.target.checked) {\n                               i18n.changeLanguage(lang)\n                           }\n                       }}\n                />\n                {siteLanguages[lang].endonym}\n            </label></li>\n        )\n\n        return (<div>\n            <fieldset>\n                <legend>{t(\"settings.sharing\")}</legend>\n                <span>{scoring ? \"\" : t(\"settings.shareHint\")}</span>\n                <ul>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"text\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"text\"}/>\n                        {t(\"settings.shareText\")}\n                    </label></li>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"spoiler\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"spoiler\"}/>\n                        {t(\"settings.shareSpoilers\")}\n                    </label></li>\n                    <li><label><input type=\"radio\" name=\"style\" value=\"image\"\n                                      onChange={this.changeShareStyle}\n                                      disabled={!scoring}\n                                      checked={this.state.share === \"image\"}/>\n                        {t(\"settings.shareImage\")}\n                    </label></li>\n                </ul>\n            </fieldset>\n            <br/>\n            <fieldset>\n                <legend>{t(\"settings.language\")}</legend>\n                <ul>\n                    {languageChoices}\n                </ul>\n                <p>{t(\"settings.languageDisclaimer\")}</p>\n                <p>{t(\"settings.languageExplanation\")}</p>\n            </fieldset>\n        </div>)\n    }\n}\n\nexport default withTranslation()(Settings);\n","import React from \"react\";\nimport {getData, plural} from \"./utils\";\nimport ModalComponent from \"./ModalComponent\";\nimport {withTranslation} from \"react-i18next\";\n\nconst FIRST_EASY = 11;\n\nclass Statistics extends ModalComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        const scores = getData('scores') || {};\n        this.games = Object.keys(scores).length;\n        this.wins = 0;\n        this.maxScore = 0;\n        this.scores = {};\n        const self = this;\n\n        // Calculate streaks\n        this.cStreak = 0;\n        this.mStreak = 0;\n\n        Object.values(scores).forEach(function (s, i) {\n            let won = s !== 'X';\n            if (won) {\n                s = parseInt(s);\n            }\n            let c = self.scores[s] || 0;\n            self.scores[s] = c + 1;\n            self.maxScore = Math.max(self.maxScore, self.scores[s]);\n            if (won) {\n                self.wins += 1;\n            }\n            if (s === 'X') {\n                self.cStreak = 0;\n            } else {\n                self.cStreak += 1;\n            }\n            self.mStreak = Math.max(self.cStreak, self.mStreak);\n        });\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    getTitle() {\n        return this.props.t(\"titles.stats\");\n    }\n\n    contents() {\n        const t = this.props.t;\n        let distribution = <h4>{t('stats.empty')}</h4>;\n        if (Object.keys(this.scores).length > 0) {\n            const scores = [1, 2, 3, 4, 5, 6]\n                .map(s => this.scores[s] || 0)\n                .map((s, i) =>\n                    <li style={{width: (s / this.maxScore * 100) + '%'}} key={i}\n                        aria-label={t('stats.graphLabelA', {count: s}) + t('stats.graphLabelB', {count: i+1})}>\n                        <div className=\"GraphLabel\" aria-hidden=\"true\">{s}</div>\n                    </li>\n                );\n            distribution = (\n                <ol className=\"Distribution\" aria-label={t('stats.distribution')}>\n                    {scores}\n                </ol>\n            )\n        }\n        return (\n            <div>\n                <div className=\"StatsList\">\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.games}</span>\n                        <span className=\"StatLabel\">{t(\"stats.games\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.wins}</span>\n                        <span className=\"StatLabel\">{t(\"stats.wins\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.cStreak}</span>\n                        <span className=\"StatLabel\">{t(\"stats.thisStreak\")}</span>\n                    </div>\n                    <div className=\"StatBox\">\n                        <span className=\"Stat\">{this.mStreak}</span>\n                        <span className=\"StatLabel\">{t(\"stats.maxStreak\")}</span>\n                    </div>\n                </div>\n                <h2>{t(\"stats.distribution\")}</h2>\n                <hr/>\n                {distribution}\n            </div>\n        )\n    }\n}\n\nexport default withTranslation()(Statistics);","import React from 'react'\nimport {withTranslation} from \"react-i18next\";\n\nimport ServerComponent from \"./ServerComponent\";\nimport Passage from \"./Passage\";\nimport Guesses from \"./Guesses\";\n\nimport './App.css';\nimport Info from \"./Info\";\nimport HowTo from \"./HowTo\";\nimport Settings from \"./Settings\";\nimport Statistics from \"./Statistics\";\n\nclass App extends ServerComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            puzzle: {\n                lines: [\n                    \"Welcome to Bookle!\"\n                ]\n            },\n            modal: null,\n        }\n\n        this.openInfo = this.openInfo.bind(this);\n        this.openHelp = this.openHelp.bind(this);\n        this.openSettings = this.openSettings.bind(this);\n        this.openStats = this.openStats.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n    }\n\n    openInfo() {\n        this.setState({modal: \"info\"});\n    }\n\n    openHelp() {\n        this.setState({modal: \"help\"});\n    }\n\n    openSettings() {\n        this.setState({modal: \"settings\"});\n    }\n\n    openStats() {\n        this.setState({modal: \"stats\"});\n    }\n\n    closeModal() {\n        this.setState({modal: null});\n    }\n\n    render() {\n        let t = this.props.t;\n        let font = \"\";\n        return (\n            <div className=\"Container\">\n                {font}\n                <div className=\"MainColumn\" aria-hidden={this.state.modal ? \"true\" : \"false\"}>\n                    <div className=\"Buffer\"/>\n                    <div className=\"ContentWrapper\">\n                        <header className=\"Header\">\n                            <span className=\"IconSet Left\">\n                                <a className=\"Help Icon TipBelow\" title={t(\"titles.how-to\")} onClick={this.openHelp}>\n                                    <i className=\"fa-solid fa-circle-question\"></i>\n                                </a>\n                                <a className=\"Info Icon TipBelow\" title={t(\"titles.credits\")} onClick={this.openInfo}>\n                                    <i className=\"fa-solid fa-circle-info\"></i>\n                                </a>\n                            </span>\n                            <h1>Bookle</h1>\n                            <span className=\"IconSet Right\">\n                                <a className=\"Settings Icon TipBelow\" title={t(\"titles.settings\")} onClick={this.openSettings}>\n                                    <i className=\"fa-solid fa-gear\"></i>\n                                </a>\n                                <a className=\"Stats Icon TipBelow\" title={t(\"titles.score\")} onClick={this.openStats}>\n                                    <i className=\"fa-solid fa-square-poll-horizontal\"></i>\n                                </a>\n                            </span>\n                        </header>\n                        <Passage lines={this.state.puzzle.lines}/>\n                        <div className=\"Body\">\n                            <Guesses puzzle={this.state.puzzle} key={this.state.puzzle.order}/>\n                        </div>\n                    </div>\n                </div>\n                <Info on={this.state.modal === \"info\"} onClose={this.closeModal}/>\n                <HowTo on={this.state.modal === \"help\"} onClose={this.closeModal}/>\n                <Settings on={this.state.modal === \"settings\"} word={this.state.word} onClose={this.closeModal}/>\n                <Statistics on={this.state.modal === \"stats\"} onClose={this.closeModal}/>\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        this.fetch(\"/today.json?tz=\" + new Date().getTimezoneOffset(),\n            (result) => {\n                this.setState({\n                    puzzle: result,\n                });\n            });\n    }\n}\n\nexport default withTranslation()(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport Backend from 'i18next-http-backend';\n\ni18n\n  // i18next-http-backend\n  // loads translations from your server\n  // https://github.com/i18next/i18next-http-backend\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    debug: true,\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    }\n  });\n\n// new usage\n// i18n.services.formatter.add('DATE_HUGE', (value, lng, options) => {\n//   return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime.DATE_HUGE)\n// });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18n';\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}